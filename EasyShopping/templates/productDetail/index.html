{% extends "layout/myLayout.html" %}
{% load static %}
{% block content %}
        <!-- Product section-->
        
        <section class="py-5">
            <div class="container px-4 px-lg-5 my-5">
                <div class="row gx-4 gx-lg-5 align-items-center">
                    <div class="col-md-6"><img class="card-img-top mb-5 mb-md-0" src="{{product.productImage.url}}" alt="..." /></div>
                    <div class="col-md-6">
                        <h1 class="display-5 fw-bolder">{{product.productName}}</h1>
                        <div class="fs-5 mb-5">
                            <span class="text-decoration-line-through">${{product.price}}</span>
                            <span>${{product.getNewPrice}}</span>
                        </div>
                        <p class="lead">{{product.description}}</p>
                        <div class="row mb-3">
                            <div class="col-sm-2">
                                <input class="form-control text-center me-3" id="inputQuantity" type="num" value="1" style="max-width: 3rem" />
                            </div>
                            <div class="col-sm-3">
                                
                                <select class="form-select" aria-label="Default select example">
                                    {% for item in product.items.all %}
                                        <option value="{{item.size}}">{{item.size}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            
                            
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <button id="addToCartButton" class="btn btn-outline-dark flex-shrink-0" type="button">
                                    <i class="bi-cart-fill me-1"></i>
                                    Add to cart
                                </button>
                            </div>
                            
                            <div class="col-sm-3">
                                <button id="buyButton" class="btn btn-outline-dark flex-shrink-0" type="button">
                                    <i class="bi-cart-fill me-1"></i>
                                    Buy Now
                                </button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Related items section-->
        <section class="py-5 bg-light">
            <div class="container px-4 px-lg-5 mt-5">
                <h2 class="fw-bolder mb-4">Related products</h2>
                <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                    <div class="col mb-5">
                        <div class="card h-100">
                            <!-- Product image-->
                            <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" alt="..." />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Fancy Product</h5>
                                    <!-- Product price-->
                                    $40.00 - $80.00
                                </div>
                            </div>
                            <!-- Product actions-->
                            <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center"><a class="btn btn-outline-dark mt-auto" href="#">View options</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-5">
                        <div class="card h-100">
                            <!-- Sale badge-->
                            <div class="badge bg-dark text-white position-absolute" style="top: 0.5rem; right: 0.5rem">Sale</div>
                            <!-- Product image-->
                            <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" alt="..." />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Special Item</h5>
                                    <!-- Product reviews-->
                                    <div class="d-flex justify-content-center small text-warning mb-2">
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                    </div>
                                    <!-- Product price-->
                                    <span class="text-muted text-decoration-line-through">$20.00</span>
                                    $18.00
                                </div>
                            </div>
                            <!-- Product actions-->
                            <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center"><a class="btn btn-outline-dark mt-auto" href="#">Add to cart</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-5">
                        <div class="card h-100">
                            <!-- Sale badge-->
                            <div class="badge bg-dark text-white position-absolute" style="top: 0.5rem; right: 0.5rem">Sale</div>
                            <!-- Product image-->
                            <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" alt="..." />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Sale Item</h5>
                                    <!-- Product price-->
                                    <span class="text-muted text-decoration-line-through">$50.00</span>
                                    $25.00
                                </div>
                            </div>
                            <!-- Product actions-->
                            <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center"><a class="btn btn-outline-dark mt-auto" href="#">Add to cart</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-5">
                        <div class="card h-100">
                            <!-- Product image-->
                            <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" alt="..." />
                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">
                                    <!-- Product name-->
                                    <h5 class="fw-bolder">Popular Item</h5>
                                    <!-- Product reviews-->
                                    <div class="d-flex justify-content-center small text-warning mb-2">
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                    </div>
                                    <!-- Product price-->
                                    $40.00
                                </div>
                            </div>
                            <!-- Product actions-->
                            <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center"><a class="btn btn-outline-dark mt-auto" href="#">Add to cart</a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        {% comment %} <div id="productDetail">
            <h1 id="productName"></h1>
            <p id="productDescription"></p>
            <p>Price: <span id="productPrice"></span></p>
            <img id="productImage" src="" alt="Product Image" width="200" />
            
            <h3>Available Sizes</h3>
            <ul id="productSizes"></ul>
        
            <h3>Reviews</h3>
            <ul id="productReviews"></ul>
        </div>

        <script>
            $(document).ready(function(){
                const productID = 1;  // Replace with the actual product ID you want to fetch
        
                // Perform AJAX request to get product detail from the API
                $.ajax({
                    url: `/api/product/${productID}/`,  // Your API endpoint
                    method: 'GET',
                    dataType: 'json',
                    success: function(data) {
                        // Data successfully retrieved from the API
                        console.log(data);  // Log the data to inspect the structure
        
                        // Example: Display product information in HTML
                        $('#productName').text(data.productName);
                        $('#productDescription').text(data.description);
                        $('#productPrice').text(data.price);
                        $('#productImage').attr('src', data.productImage);
        
                        // Show sizes and stock quantities
                        let sizes = '';
                        data.items.forEach(function(item) {
                            sizes += `<li>${item.size}: ${item.stockQuantity} in stock</li>`;
                        });
                        $('#productSizes').html(sizes);
        
                        // Show reviews
                        let reviews = '';
                        data.reviews.forEach(function(review) {
                            reviews += `<li>${review.user}: ${review.rating} stars - ${review.comment}</li>`;
                        });
                        $('#productReviews').html(reviews);
                    },
                    error: function(error) {
                        console.log('Error:', error);  // Handle any errors
                    }
                });
            });
        </script> {% endcomment %}
{% endblock content %}